---
export interface Props {
  terms: string[];
}

const { terms } = Astro.props;
---

<div class="glossary-container my-8 p-6 rounded-lg border-2 border-primary/20 dark:border-primary/30 bg-card dark:bg-dark-card">
  <h3 class="text-xl font-bold mb-4 text-foreground dark:text-dark-foreground flex items-center gap-2">
    <span class="text-2xl">ðŸ“š</span>
    Viktiga begrepp
  </h3>
  <p class="text-sm text-muted-foreground dark:text-dark-muted-foreground mb-4">
    Se till att du kan fÃ¶rklara dessa begrepp med egna ord:
  </p>
  <ul class="space-y-2 glossary-terms">
    {terms.map(term => (
      <li class="flex items-start gap-2 text-foreground dark:text-dark-foreground">
        <span class="text-primary dark:text-primary mt-1">â€¢</span>
        <span class="font-medium">{term}</span>
      </li>
    ))}
  </ul>
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const glossaryContainers = document.querySelectorAll('.glossary-container');
    
    glossaryContainers.forEach(container => {
      const termElements = container.querySelectorAll('.glossary-terms li span:last-child');
      const terms = Array.from(termElements).map(el => el.textContent?.trim() || '');
      
      // Dispatch event with glossary terms for LessonProgress to pick up
      window.dispatchEvent(new CustomEvent('glossaryLoaded', {
        detail: { terms }
      }));
    });
  });
</script>

<style>
  .glossary-container {
    font-family: inherit;
  }
</style>
